<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:p="http://primefaces.org/ui"
    xmlns:jsf="http://xmlns.jcp.org/jsf"	
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets">

<ui:composition template="../template/listaTabela.xhtml">

	<ui:define name="filtroAvancado">
	
    	 					<h:panelGroup layout="block">
    					 		<div class="box-body">
									<h:panelGroup styleClass="form-group col-md-6" layout="block">
										<p:outputLabel value="Val Inicial:" for="fdataini" title="Data inicial em que o produto estará ativo"/>
										<div class="input-group form-control-calendar ">
			            					<p:calendar id="fdataini" 
    	           		 								value="#{filtro.dataini}"
        	            	        					mask="true"
            	            		    				pattern="dd/MM/yyyy"
														converter="dateCalendarConverter">
											</p:calendar>
										</div>
									</h:panelGroup>
									<h:panelGroup styleClass="form-group col-md-6" layout="block">
										<p:outputLabel value="Val Inicial:" for="fdatafim" title="Data final em que o produto estará ativo"/>
										<div class="input-group form-control-calendar ">
			            					<p:calendar id="fdatafim" 
               		 									value="#{filtro.datafim}"
                    	        						mask="true"
                        		    					pattern="dd/MM/yyyy"
														converter="dateCalendarConverter">
											</p:calendar>
										</div>
									</h:panelGroup>
								</div>
								<div class="box-footer align-right margin-btn">
									<p:commandLink value="Aplicar"
  	    			    		                   actionListener="#{bean.buscaTabela()}" 
  	    			    		                   onclick="$('.ui-overlaypanel-close').click();"
	    			            		           update="panel_tabela"
											       styleClass="btn btn-flat btn-warning"/>
  								</div>	
							</h:panelGroup>
	
	</ui:define>
		
	<ui:define name="listaColunas">
	
						<p:column sortable="true" sortBy="#{lista.id}">
							<f:facet name="header">id</f:facet>
							<h:outputText value="#{lista.id}"/>
						</p:column>
						
						<p:column sortable="true" sortBy="#{lista.id}" filterable="true" filterBy="#{lista.descricao}"> 
							<f:facet name="header">Descrição</f:facet>
							<h:outputText value="#{lista.descricao}"/>
						</p:column>
						
						<p:column>
							<f:facet name="header">Categoria</f:facet>
							<h:outputText value="#{lista.categoria.descricao}"/>
						</p:column>
						
						<p:column>
							<f:facet name="header">Preco</f:facet>
							<h:outputText value="#{lista.preco}"/>
						</p:column>
						
						<p:column>
							<f:facet name="header">Inicio</f:facet>
							<h:outputText value="#{lista.datainicio.time}">
								<f:convertDateTime pattern="dd/MM/yyyy"  />
							</h:outputText>
						</p:column>
						
						<p:column>
							<f:facet name="header">Fim</f:facet>
							<h:outputText value="#{lista.datafim.time}">
								<f:convertDateTime pattern="dd/MM/yyyy"  />
							</h:outputText>
						</p:column>
						
						<p:column>
							<f:facet name="header">Ativo</f:facet>
							<h:outputText value="#{lista.regAtivo}"/>
						</p:column>
						
						<p:column>
							<f:facet name="header">Cadastrado Por</f:facet>
							<h:outputText value="#{lista.criadoPor.nome}"/>
						</p:column>
	</ui:define>
	
</ui:composition>

</html>
