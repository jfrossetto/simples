<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets">

<ui:composition template="../template/principal.xhtml">
	
    <f:metadata>
        <f:viewAction action="#{produtoBean.initializeForm(param.produtoId)}"/>
    </f:metadata>
	
	<ui:define name="titulo">
			Produto
	</ui:define>
	
	<ui:define name="descricaoPagina">
        <h:outputText rendered="#{produtoBean.viewState eq 'ADDING'}"
                      value="Novo" />
        <h:outputText rendered="#{produtoBean.viewState eq 'EDITING'}" 
                        value="Alterando #{produtoBean.produto.descricao}" />
	</ui:define>

    <ui:define name="breadcrumb">
        <li><a href="#">Home</a></li>
        <li class="active"><a href="#">Produto</a></li>
    </ui:define>

	<ui:define name="conteudo">
	
		<h:form id="formCadastro">
		
            <div class="row">
                <div class="col-md-12">
                    <p:messages id="messages" closable="true" />
                </div>
            </div>

            <div class="box">
            
                <div class="box-header with-border">
                    <h3 class="box-title">
                        #{produtoBean.produto.id}
                    </h3>
                </div>
                
				<div  class="box-body">
                <h:panelGroup id="panel_produto">
                
                    <h:panelGroup id="panel_produto_esq" styleClass="col-md-6 col-sm-6 col-xs-6 no-padding">
                    
						<h:panelGroup styleClass="form-group col-md-12" rendered="#{produtoBean.produto.id ne null}">
							<div class="col-xs-6" style="padding: 0px">
							<h:outputLabel value="Id Produto" for="id" />
							<p:inputText id="id" immediate="true" styleClass="form-control col-xs-6" 
									 value="#{produtoBean.produto.id}"							
									 disabled="true"/>
							</div>
						</h:panelGroup>
                    
						<h:panelGroup styleClass="form-group col-md-8">
							<h:outputLabel value="Descricao" for="descricao" />
							<p:inputText id="descricao" immediate="true"
							         value="#{produtoBean.produto.descricao}"
							         required="true" requiredMessage="Descrição deve ser informada" maxlength="64" validatorMessage="Descricao deve ter até 64 caracteres" 
							         styleClass="form-control"/>
						</h:panelGroup>
						
						<h:panelGroup styleClass="form-group col-md-4">
							<h:outputLabel value="Descricao Reduzida" for="descred" />
							<p:inputText id="descred" immediate="true" 
							         value="#{produtoBean.produto.desc_reduzida}"
							         maxlength="32" validatorMessage="Descricao Reduzida deve ter até 32 caracteres" 
							         styleClass="form-control"/>
						</h:panelGroup>
						                    
						<h:panelGroup styleClass="form-group col-md-6">
							<p:outputLabel value="Val Inicial:" for="datainicio" title="Data inicial em que o produto estará ativo"/>
							<div class="input-group form-control-calendar ">
	                  			<p:calendar id="datainicio" immediate="true"
	                  						locale="pt"
	    	              					title="Data inicial em que o produto estará ativo"
            	   		 					value="#{produtoBean.produto.datainicio}"
                	    	        		mask="true"
               			    				pattern="dd/MM/yyyy"
											converter="dateCalendarConverter"/>
							</div>
						</h:panelGroup>
						
						<h:panelGroup styleClass="form-group col-md-6">
							<p:outputLabel value="Val Final:" for="datafim" title="Data final em que o produto estará ativo"/>
							<div class="input-group form-control-calendar ">
           						<p:calendar id="datafim" immediate="true" navigator="true"
	                  						locale="pt"
	    	              					title="Data final em que o produto estará ativo"
       		 								value="#{produtoBean.produto.datafim}"
                    	        			mask="true"
                        		    		pattern="dd/MM/yyyy"
											converter="dateCalendarConverter"/>
							</div>
						</h:panelGroup>

						<h:panelGroup styleClass="form-group col-md-6">
							<p:outputLabel value="Categoria:" for="categoria" />
    	    	      		<p:inputText id="categoria" immediate="true"
    	    	      					value="#{produtoBean.produto.categoria}"
        	 		      			 	styleClass="form-control" />
						</h:panelGroup>
						
						<h:panelGroup styleClass="form-group col-md-6">
							<p:outputLabel value="Tipo:" for="tipo" />
    	    	      		<p:inputText id="tipo" immediate="true" 
    	    	      					value="#{produtoBean.produto.tipo}"
        	 		      			 	styleClass="form-control" />
						</h:panelGroup>
						
						<h:panelGroup styleClass="form-group col-md-6">
							<p:outputLabel value="Preco:" for="preco" />
    	    	      		<p:inputNumber id="preco" immediate="true"
    	    	      					value="#{produtoBean.produto.preco}"
    	    	      					decimalPlaces="2"
        	 		      			 	 />
						</h:panelGroup>
						
						<h:panelGroup styleClass="form-group col-md-6">
							<p:outputLabel value="Preco Old:" for="precode" />
    	    	      		<p:inputNumber id="precode" immediate="true" 
    	    	      					value="#{produtoBean.produto.preco_de}"
    	    	      					decimalPlaces="2"
										 />
						</h:panelGroup>
						
					</h:panelGroup>
					
                    <h:panelGroup id="panel_produto_dir" styleClass="col-md-6 col-sm-6 col-xs-6 no-padding">
						<h:panelGroup styleClass="form-group col-md-12">
							<p:outputLabel value="Complemento:" for="obscomplemento" />
    	    	      		<p:inputTextarea id="obscomplemento" immediate="true" 
												value="#{produtoBean.produto.complemento}"
												rows="4" maxlength="512"
												counter="displaycounter" counterTemplate="{0} resta" 
												styleClass="form-control" />
							<h:outputText id="displaycounter" />
						</h:panelGroup>
						
					</h:panelGroup>
					
                </h:panelGroup>
				</div>
				
                <div class="box-footer align-right">

					<p:commandButton value="Salvar" 
									 action="#{produtoBean.doSave()}"
									 styleClass="btn btn-flat btn-success"
									 process="formCadastro"
									 update="formCadastro"
									 rendered="#{produtoBean.viewState eq 'ADDING'}" />
					<p:commandButton value="Atualizar" 
									 action="#{produtoBean.doUpdate()}"
									 styleClass="btn btn-flat btn-success"
									 process="formCadastro"
									 update="formCadastro"
									 rendered="#{produtoBean.viewState eq 'EDITING'}" />
					<p:spacer width="10"/>
					<p:commandButton immediate="true"
					                 value="Voltar" 
									 action="#{produtoBean.doCancel()}"
									 styleClass="btn btn-flat btn-default" />
				</div>
				
			</div>
				
		</h:form>
	
	</ui:define>
	
</ui:composition>

</html>



