<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets">

<ui:fragment>

        <h:panelGroup id="panel_crud" layout="block">

            <div class="box">
            
                <div class="box-header with-border">
	                <div class="align-right margin-btn">
						<p:commandButton immediate="true"
					                 value="Voltar"
					                 type="button"
					                 icon="fa fa-reply" 
					                 onclick="voltar()"  
									 styleClass="btn btn-flat btn-default" />
						<p:remoteCommand  name="voltar" resetValues="true" actionListener="#{bean.modoListaTabela()}" immediate="true"/>
                       	<p:commandButton immediate="true"
                           	           value="Novo"
                           	           icon="fa fa-plus"
                           	           resetValues="true"
                           	           actionListener="#{bean.modoNovoCadastro()}"
                                   	   styleClass="btn btn-flat btn-info"
                                   	   rendered="#{usuarioLogado.temPermissao('R_PRODUTO_NEW') and bean.viewState eq 'EDITING'}" />
					</div>
                </div>
                
                <h:panelGroup id="panel_produto" styleClass="box-body">
                
                    <h:panelGroup id="panel_produto_esq" layout="block" 
                    			styleClass="col-md-6 col-sm-6 col-xs-6 no-padding">
                    
						<h:panelGroup styleClass="form-group col-md-12" layout="block"  
									rendered="#{produtoBean.produto.id ne null}">
							<div class="col-xs-6" style="padding: 0px">
							<h:outputLabel value="Id Produto" for="id" />
							<p:inputText id="id" styleClass="form-control col-xs-6"  
									 value="#{produtoBean.produto.id}"							
									 disabled="true"/>
							</div>
						</h:panelGroup>
                    
						<h:panelGroup styleClass="form-group col-md-8" layout="block">
							<h:outputLabel value="Descricao" for="descricao" />
							<p:inputText id="descricao"  
							         value="#{produtoBean.produto.descricao}"
							         required="true" requiredMessage="Descrição deve ser informada" maxlength="64" validatorMessage="Descricao deve ter até 64 caracteres" 
							         styleClass="form-control"/>
						</h:panelGroup>
						
						<h:panelGroup styleClass="form-group col-md-4" layout="block">
							<h:outputLabel value="Descricao Reduzida" for="descred" />
							<p:inputText id="descred"  
							         value="#{produtoBean.produto.desc_reduzida}"
							         maxlength="32" validatorMessage="Descricao Reduzida deve ter até 32 caracteres" 
							         styleClass="form-control"/>
						</h:panelGroup>
						                    
						<h:panelGroup styleClass="form-group col-md-6" layout="block">
							<p:outputLabel value="Val Inicial:" for="datainicio" title="Data inicial em que o produto estará ativo"/>
							<div class="input-group form-control-calendar ">
	                  			<p:calendar id="datainicio" navigator="true"
	                  						locale="pt"
	    	              					title="Data inicial em que o produto estará ativo"
            	   		 					value="#{produtoBean.produto.datainicio}"
                	    	        		mask="true"
               			    				pattern="dd/MM/yyyy"
											converter="dateCalendarConverter"/>
							</div>
						</h:panelGroup>
						
						<h:panelGroup styleClass="form-group col-md-6" layout="block">
							<p:outputLabel value="Val Final:" for="datafim" title="Data final em que o produto estará ativo"/>
							<div class="input-group form-control-calendar ">
           						<p:calendar id="datafim" navigator="true"
	                  						locale="pt"
	    	              					title="Data final em que o produto estará ativo"
       		 								value="#{produtoBean.produto.datafim}"
                    	        			mask="true"
                        		    		pattern="dd/MM/yyyy"
											converter="dateCalendarConverter"/>
							</div>
						</h:panelGroup>

						<h:panelGroup styleClass="form-group col-md-6" layout="block">
							<p:outputLabel value="Categoria:" for="categoria" />
    	    	      		<p:inputText id="categoria" 
    	    	      					value="#{produtoBean.produto.categoria}"
        	 		      			 	styleClass="form-control" />
						</h:panelGroup>
						
						<h:panelGroup styleClass="form-group col-md-6" layout="block">
							<p:outputLabel value="Tipo:" for="tipo" />
    	    	      		<p:inputText id="tipo"  
    	    	      					value="#{produtoBean.produto.tipo}"
        	 		      			 	styleClass="form-control" />
						</h:panelGroup>
						
						<h:panelGroup styleClass="form-group col-md-6" layout="block">
							<p:outputLabel value="Preco:" for="preco" />
    	    	      		<p:inputNumber id="preco" 
    	    	      					value="#{produtoBean.produto.preco}"
    	    	      					decimalPlaces="2"
        	 		      			 	 />
						</h:panelGroup>
						
						<h:panelGroup styleClass="form-group col-md-6" layout="block">
							<p:outputLabel value="Preco Old:" for="precode" />
    	    	      		<p:inputNumber id="precode"  
    	    	      					value="#{produtoBean.produto.preco_de}"
    	    	      					decimalPlaces="2"
										 />
						</h:panelGroup>
						
					</h:panelGroup>
					
                    <h:panelGroup id="panel_produto_dir" layout="block" styleClass="col-md-6 col-sm-6 col-xs-6 no-padding">
						<h:panelGroup styleClass="form-group col-md-12" layout="block">
							<p:outputLabel value="Complemento:" for="obscomplemento" />
    	    	      		<p:inputTextarea id="obscomplemento"  
												value="#{produtoBean.produto.complemento}"
												rows="4" maxlength="512"
												counter="displaycounter" counterTemplate="{0} resta" 
												styleClass="form-control" />
							<h:outputText id="displaycounter" />
						</h:panelGroup>
					</h:panelGroup>
					
                </h:panelGroup>
				
                <div class="box-footer align-right margin-btn">

					<p:commandLink value="Salvar" 
									 actionListener="#{produtoBean.salvar}"
									 styleClass="btn btn-flat btn-success"
									 update="panel_crud" process="formCadastro"
									 rendered="#{produtoBean.viewState eq 'ADDING'}" />
									 
					<p:commandLink value="Atualizar" 
									 actionListener="#{bean.atualizar}"
									 update="panel_crud" process="formCadastro"
									 styleClass="btn btn-flat btn-success"
									 rendered="#{produtoBean.viewState eq 'EDITING'}" />
					
				</div>
				
			</div>
			
		</h:panelGroup>
				
</ui:fragment>

</html>



